<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Untamed Spirits â€” Apex Series</title>
  <meta name="description" content="Untamed Spirits: premium gym wear with apex predator artwork." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Outfit:wght@600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="topbar">
    <div class="container tb-inner">
      <span>ðŸ”¥ New drop: Apex Series</span>
      <a href="#shop" class="chip">Shop now</a>
    </div>
  </div>

  <header class="header">
    <div class="container header-row">
      <a class="brand" href="#home">Untamed <span>Spirits</span></a>
      <nav class="nav">
        <a href="#shop">Shop</a>
        <a href="#lookbook">Lookbook</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
      </nav>
      <button id="cartBtn" class="icon-btn" aria-label="Open cart">ðŸ›’</button>
    </div>
  </header>

  <main id="home">
    <!-- Hero -->
    <section class="hero">
      <div class="container hero-grid">
        <div class="hero-copy">
          <h1>Take Nothing Give Everything</h1>
          <p>Performance tees with apex artwork. Minimal chest branding. Built to move.</p>
          <div class="cta-row">
            <a href="#shop" class="btn btn-primary">Shop Collection</a>
            <a href="#lookbook" class="btn btn-ghost">Lookbook</a>
          </div>
        </div>
        <div class="hero-media">
          <img class="hero-img" alt="Untamed Spirits hero" src="hero.jpg">
          <div class="glass hero-badge">Apex â€¢ 2025</div>
        </div>
      </div>
    </section>

    <!-- Shop (single, no duplicates) -->
    <section id="shop" class="section">
      <div class="container">
        <div class="section-head">
          <h2>Featured Tees</h2>
          <div class="filters">
            <button class="filter chip is-active" data-filter="all">All</button>
            <button class="filter chip" data-filter="big-cat">Big Cats</button>
            <button class="filter chip" data-filter="power">Power</button>
            <button class="filter chip" data-filter="pack">Pack</button>
          </div>
        </div>
        <!-- JS renders cards here -->
        <div id="productGrid" class="grid"></div>
      </div>
    </section>

    <!-- Lookbook -->
    <section id="lookbook" class="section">
      <div class="container">
        <h2>Lookbook</h2>
        <div class="lookbook-grid reveal">
          <img alt="look 1" src="look1.jpg">
          <img alt="look 2" src="look2.jpg">
          <img alt="look 3" src="look3.jpg">
          <img alt="look 4" src="look4.jpg">
          <img alt="look 6" src="look6.jpg">
          <img alt="look 5" src="look5.jpg">
          <!---New One--->
          <img alt="look 7" src="look7.jpg">
        </div>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="section">
      <div class="container about-wrap glass">
        <div>
          <h2>About Untamed Spirits</h2>
          <p>We design gear that looks sharp and performs harder. Moisture-wicking, four-way stretch, reinforced seams â€” so you feel confident under the bar and clean outside the gym.</p>
        </div>
        <ul class="bullets">
          <li>Premium performance fabric</li>
          <li>Athletic cut, true to size</li>
          <li>Limited seasonal drops</li>
        </ul>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="section">
      <div class="container contact-grid">
        <div>
          <h2>Contact</h2>
          <p>Questions, wholesale, or collabs? Letâ€™s talk.</p>
        </div>
        <form id="contactForm" class="form glass">
          <input type="text" name="name" placeholder="Your name" required>
          <input type="email" name="email" placeholder="you@email.com" required>
          <textarea name="message" rows="4" placeholder="Message" required></textarea>
          <button class="btn btn-primary" type="submit">Send</button>
        </form>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container foot-row">
      <div class="foot-brand">Â© <span id="year"></span> Untamed Spirits</div>
      <a class="ig" target="_blank" href="https://www.instagram.com/untamedspiritsllc?igsh=MW5lemR5dXdqeGM0Mg%3D%3D&utm_source=qr">Instagram @untamedspiritsllc</a>
    </div>
  </footer>

  <!-- Modal -->
  <div id="productModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <button id="modalClose" class="icon-btn close" aria-label="Close">âœ•</button>
      <div id="modalBody"></div>
    </div>
  </div>

  <!-- Cart drawer (single checkout button) -->
  <aside id="cartDrawer" class="cart" aria-hidden="true">
    <header class="cart-head">
      <h3>Your Cart</h3>
      <button id="closeCart" class="icon-btn" aria-label="Close cart">âœ•</button>
    </header>
    <div id="cartItems" class="cart-items"></div>
    <div class="cart-foot">
      <div class="total">Total: $<span id="cartTotal">0.00</span></div>
      <a class="btn btn-primary" id="checkoutBtn" href="" target="_blank">Checkout</a>
    </div>
  </aside>

  <!-- SINGLE, CONSOLIDATED SCRIPT -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // ---------- UTILITIES ----------
    const $ = (s, c=document) => c.querySelector(s);
    const $$ = (s, c=document) => Array.from(c.querySelectorAll(s));
    $('#year').textContent = new Date().getFullYear();

    // ---------- STRIPE + PRODUCT DATA ----------
    const STRIPE = {
      'Lion Muscle Tee':    'https://buy.stripe.com/00wfZhf94gYv49U4nJ14405',
      'Tiger Muscle Tee':   'https://buy.stripe.com/eVq6oH3qmcIffSCbQb14403',
      'Bear Muscle Tee':    'https://buy.stripe.com/00w8wPe508rZ8qa2fB14404',
      'Gorilla Muscle Tee': 'https://buy.stripe.com/fZu8wP2mi8rZbCmf2n14401',
      'Wolf Muscle Tee':    'https://buy.stripe.com/cNicN5d0W4bJ9ue7zV14402',
    };

    // Per-size prices (Tiger & Wolf = $35, others = $30; 2XL +$2)
    const PRODUCTS = [
      { title:'Lion Muscle Tee', img:'lion-logo.jpg', category:'big-cat',
        imgs:['lion-logo.jpg','lion-front.jpg','lion-vid.mp4','lion-detail.jpg'],
        variantPrices:{ XS:30, S:30, M:30, L:30, XL:30, '2XL':32 } },
      { title:'Tiger Muscle Tee', img:'tiger-logo.jpg', category:'big-cat',
        imgs:['tiger-logo.jpg','tiger-front.jpg','tiger-back.jpg','tiger-detail.jpg'],
        variantPrices:{ XS:35, S:35, M:35, L:35, XL:35, '2XL':37 } },
      { title:'Bear Muscle Tee', img:'bear-logo.jpg', category:'power',
        imgs:['bear-logo.jpg','bear-front.jpg','bear-detail.jpg'],
        variantPrices:{ XS:30, S:30, M:30, L:30, XL:30, '2XL':32 } },
      { title:'Gorilla Muscle Tee', img:'gorilla-logo.jpg', category:'power',
        imgs:['gorilla-logo.jpg','gorilla-detail.jpg'],
        variantPrices:{ XS:30, S:30, M:30, L:30, XL:30, '2XL':32 } },
      { title:'Wolf Muscle Tee', img:'wolf-logo.jpg', category:'pack',
        imgs:['wolf-logo.jpg','wolf-detail.jpg'],
        variantPrices:{ XS:35, S:35, M:35, L:35, XL:35, '2XL':37 } },
    ];

    // ---------- ELEMENTS ----------
    const grid        = $('#productGrid');
    const cartBtn     = $('#cartBtn');
    const cartDrawer  = $('#cartDrawer');
    const closeCart   = $('#closeCart');
    const cartItemsEl = $('#cartItems');
    const cartTotalEl = $('#cartTotal');
    const checkoutBtn = $('#checkoutBtn');
    const modal       = $('#productModal');
    const modalBody   = $('#modalBody');
    const modalClose  = $('#modalClose');

    // ---------- HELPERS ----------
    const money = n => n.toLocaleString('en-US', { style:'currency', currency:'USD' });

    // ---------- RENDER PRODUCTS ----------
    function renderProducts(){
      grid.innerHTML = '';
      PRODUCTS.forEach(p => {
        const defaultPrice = p.variantPrices.M ?? Object.values(p.variantPrices)[0];

        const card = document.createElement('div');
        card.className = `product ${p.category}`;
        card.style.border = '2px solid #000';
        card.style.borderRadius = '12px';
        card.style.padding = '12px';
        card.style.textAlign = 'center';

        card.innerHTML = `
          <button class="img-open" aria-label="Open gallery" style="all:unset;cursor:zoom-in;display:block">
            <img src="${p.img}" alt="${p.title}" style="width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:10px;">
          </button>
          <h2 style="margin:8px 0 4px">${p.title}</h2>
          <div class="price" data-price>${money(defaultPrice)}</div>
          <div class="actions" style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:8px">
            <select class="size" aria-label="Choose size" style="padding:6px;border:1px solid #ccc;border-radius:6px">
              <option value="">Select sizeâ€¦</option>
              ${Object.keys(p.variantPrices).map(s=>`<option>${s}</option>`).join('')}
            </select>
            <button class="btn add">Add to Cart</button>
            <a class="btn" href="${STRIPE[p.title] || '#'}" target="_blank" rel="noopener">Buy Now</a>
          </div>
        `;

        // wire events OUTSIDE the template string
        const sizeEl  = card.querySelector('.size');
        const priceEl = card.querySelector('[data-price]');
        const addBtn  = card.querySelector('.add');
        const imgOpen = card.querySelector('.img-open');

        function updatePrice(){
          const sz = sizeEl.value;
          const base = p.variantPrices[sz] ?? defaultPrice;
          priceEl.textContent = money(base);
        }
        sizeEl.addEventListener('change', updatePrice);

        addBtn.addEventListener('click', (e)=>{
          e.preventDefault();
          const sz = sizeEl.value;
          if(!sz){ alert('Please select a size.'); sizeEl.focus(); return; }
          const unit = p.variantPrices[sz];
          addToCart({ title:p.title, size:sz, unitPrice:unit, stripe:STRIPE[p.title] });
        });

        imgOpen.addEventListener('click', (e)=>{
          e.preventDefault();
          openGallery(p);
        });

        grid.appendChild(card);
      });
    }

    // ---------- GALLERY / LIGHTBOX ----------
  function openGallery(p){
    const media = Array.isArray(p.imgs) && p.imgs.length ? p.imgs : [p.img];
    let idx = 0;

    const isVideo   = (src) => /\.(mp4|webm|ogg|ogv)$/i.test(src);
    const baseName  = (src) => src.replace(/\.(mp4|webm|ogg|ogv)$/i, '');
    const posterImg = (p.imgs||[]).find(x => /\.(jpe?g|png|webp|avif)$/i.test(x)) || p.img || '';

    const pauseAll = () => modalBody.querySelectorAll('video').forEach(v=>{ try { v.pause(); } catch {} });

  function paint(){
    const src = media[idx];
    const main = isVideo(src)
      ? `
        <video id="mainMedia"
               controls playsinline webkit-playsinline preload="metadata"
               poster="${posterImg}"
               style="width:100%;height:auto;max-height:72vh;object-fit:contain;border-radius:12px;border:2px solid #000;background:#000">
          <!-- Try MP4, then WebM, then the exact file -->
          <source src="${baseName(src)}.mp4"  type="video/mp4">
          <source src="${baseName(src)}.webm" type="video/webm">
          <source src="${src}" type="video/${src.split('.').pop().toLowerCase()}">
          Sorry, your browser doesnâ€™t support HTML5 video.
        </video>`
      : `
        <img id="mainMedia" src="${src}" alt="${p.title}"
             style="width:100%;height:auto;max-height:72vh;object-fit:contain;border-radius:12px;border:2px solid #000;background:#fff">`;

    modalBody.innerHTML = `
      <div style="display:grid;grid-template-columns:1fr;gap:12px;max-width:min(92vw,900px)">
        <div style="position:relative">
          <button id="prev" aria-label="Previous"
                  style="position:absolute;left:8px;top:50%;transform:translateY(-50%);border:1px solid #000;background:#fff;padding:6px 10px;border-radius:8px;cursor:pointer">â€¹</button>
          ${main}
          <button id="next" aria-label="Next"
                  style="position:absolute;right:8px;top:50%;transform:translateY(-50%);border:1px solid #000;background:#fff;padding:6px 10px;border-radius:8px;cursor:pointer">â€º</button>
        </div>
        <div>
          ${media.map((m,i)=>{
            const border = i===idx ? '#000' : '#ccc';
            return isVideo(m)
              ? `<button class="thumb ${i===idx?'is-active':''}" data-i="${i}"
                         style="all:unset;cursor:pointer;display:inline-block;margin:4px;position:relative">
                   <video muted playsinline preload="metadata" src="${m}"
                          style="width:72px;height:72px;object-fit:cover;border-radius:10px;border:2px solid ${border}"></video>
                   <span style="position:absolute;bottom:6px;right:6px;background:#000c;color:#fff;border-radius:6px;padding:0 6px;font-size:12px;line-height:20px;">â–¶</span>
                 </button>`
              : `<button class="thumb ${i===idx?'is-active':''}" data-i="${i}"
                         style="all:unset;cursor:pointer;display:inline-block;margin:4px">
                   <img src="${m}" alt="thumb ${i+1}"
                        style="width:72px;height:72px;object-fit:cover;border-radius:10px;border:2px solid ${border}">
                 </button>`;
          }).join('')}
        </div>
      </div>`;

    // Log real media errors
    const v = modalBody.querySelector('#mainMedia');
    if (v && v.tagName === 'VIDEO') {
      v.addEventListener('error', () => console.error('Video error:', v.error), { once:true });
    }

    modalBody.querySelectorAll('.thumb').forEach(b=>{
      b.addEventListener('click', ()=>{ pauseAll(); idx = Number(b.dataset.i); paint(); });
    });
    modalBody.querySelector('#prev').onclick = ()=>{ pauseAll(); idx = (idx-1+media.length)%media.length; paint(); };
    modalBody.querySelector('#next').onclick = ()=>{ pauseAll(); idx = (idx+1)%media.length; paint(); };
  }

  paint();
  modal.setAttribute('aria-hidden','false');

  const onKey = (e)=>{
    if(e.key==='Escape') close();
    if(e.key==='ArrowLeft')  modalBody.querySelector('#prev')?.click();
    if(e.key==='ArrowRight') modalBody.querySelector('#next')?.click();
  };
  function close(){ pauseAll(); modal.setAttribute('aria-hidden','true'); document.removeEventListener('keydown', onKey); }
  document.addEventListener('keydown', onKey);
  modal.addEventListener('click', (e)=>{ if(e.target === modal) close(); }, { once:true });
  modalClose?.addEventListener('click', close, { once:true });
}

    // ---------- CART ----------
    let cart = []; // {title,size,unitPrice,qty,stripe}

    function addToCart(item){
      const existing = cart.find(i => i.title===item.title && i.size===item.size);
      if(existing){ existing.qty += 1; }
      else { cart.push({...item, qty:1}); }
      renderCart();
      cartDrawer.setAttribute('aria-hidden','false');
    }

    function removeLine(idx){
      cart.splice(idx,1);
      renderCart();
    }

    function totals(){
      const subtotal = cart.reduce((s,i)=>s + i.qty*i.unitPrice, 0);
      return { subtotal, total:subtotal };
    }

    function renderCart(){
      if(cart.length===0){
        cartItemsEl.innerHTML = `<div style="color:#666">Cart empty</div>`;
        cartTotalEl.textContent = (0).toFixed(2);
        checkoutBtn.textContent = 'Checkout';
        checkoutBtn.onclick = (e)=>{ e.preventDefault(); alert('Please add a product first.'); };
        return;
      }

      cartItemsEl.innerHTML = cart.map((i,idx)=>`
        <div class="cart-row" style="display:flex;justify-content:space-between;align-items:center;margin:6px 0;gap:10px;">
          <div>
            <div style="font-weight:700">${i.title}</div>
            <div style="font-size:.9rem;color:#555">Size: ${i.size} Â· ${money(i.unitPrice)}</div>
          </div>
          <div style="display:flex;align-items:center;gap:8px;">
            <span>x${i.qty}</span>
            <strong>${money(i.qty*i.unitPrice)}</strong>
            <button class="icon-btn" aria-label="Remove" data-remove="${idx}">âœ•</button>
          </div>
        </div>
      `).join('');

      cartItemsEl.querySelectorAll('[data-remove]').forEach(btn=>{
        btn.addEventListener('click', ()=> removeLine(Number(btn.getAttribute('data-remove'))));
      });

      const { total } = totals();
      cartTotalEl.textContent = total.toFixed(2);

      const last = cart[cart.length-1];
      checkoutBtn.textContent = `Checkout â€” ${last.title}`;
      checkoutBtn.onclick = (e)=>{
        e.preventDefault();
        if(!last?.stripe){ alert('Missing Stripe link'); return; }
        window.open(last.stripe,'_blank','noopener');
      };
    }

    // Drawer open/close
    cartBtn?.addEventListener('click', ()=> cartDrawer.setAttribute('aria-hidden','false'));
    closeCart?.addEventListener('click', ()=> cartDrawer.setAttribute('aria-hidden','true'));

    // ---------- FILTERS ----------
    $$('.filter').forEach(button => {
      button.addEventListener('click', () => {
        const filter = button.getAttribute('data-filter');
        $$('.filter').forEach(b=>b.classList.remove('is-active'));
        button.classList.add('is-active');
        $$('#productGrid .product').forEach(prod => {
          prod.style.display = (filter==='all' || prod.classList.contains(filter)) ? 'block' : 'none';
        });
      });
    });

    // ---------- LOOKBOOK: reuse same modal ----------
    $$('.lookbook-grid img').forEach(img => {
      img.style.cursor = 'zoom-in';
      img.addEventListener('click', () => {
        modalBody.innerHTML = `
          <div style="padding:8px">
            <img src="${img.src}" alt="${img.alt || ''}" style="width:100%;height:100%;object-fit:contain;border-radius:12px;border:2px solid #000;background:#fff">
          </div>`;
        modal.setAttribute('aria-hidden', 'false');
      });
    });
    modalClose?.addEventListener('click', () => modal.setAttribute('aria-hidden', 'true'));
    modal.addEventListener('click', (e) => { if (e.target === modal) modal.setAttribute('aria-hidden', 'true'); });

    // ---------- INIT ----------
    renderProducts();
    renderCart();

    // simple reveal helper
    $$('.reveal').forEach(el => el.classList.add('in'));
  });
  </script>
</body>
</html>
